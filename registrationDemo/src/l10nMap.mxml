<?xml version="1.0" encoding="utf-8"?>
<LocaleMap 	enableLog="true"
			xmlns="http://com.asfusion.mate/l10n"
			xmlns:mx="http://www.adobe.com/2006/mxml" >
	
	<!-- Support for Locale ResourceBundle changes -->
	<mx:Script>
		<![CDATA[
			import mx.controls.Image;
			
			import com.thunderbay.i18nDemo.views.SignInPage;
			import com.thunderbay.i18nDemo.views.forms.AlreadyRegisteredForm;
			import com.thunderbay.i18nDemo.views.forms.RegistrationForm;
			
			import com.thunderbay.i18nDemo.views.forms.dummy.SignInButton;	// Dummy subclass of Image 
			import com.thunderbay.i18nDemo.vo.AccountVO;					// Injection of data model
			
			[Inject]			
			[Bindable]
			public var account : AccountVO 	= null;	

			
			/**
			 *  EventHandler when locales change to force the SignIn form to any existing
			 *  validation errors. 
			 */
			private function onClearValidationErrors(event:Event):void {
				var source     : SmartResourceInjector = (event.target as SmartResourceInjector); 
				var signInPage : SignInPage 		   = source.targetInstances[0] as SignInPage;
				
				if (signInPage != null) {
					// Tooltip error messages are updated upon validation until validation recycles...
					signInPage.clearErrors();	
				}
			}
			
		]]>
	</mx:Script>
	
		<!-- Special use of SRI to maintain reference to class instance of SignInPage, after locale changes: clear any validation errors. -->

	<SmartResourceInjector bundleName="registration" target="{SignInPage}" localeChange="onClearValidationErrors(event);" />
		
		<!--
			 SmartResourceInjectors for targeted class instantiations. Instead of dependency injection of UI instances,       
			 we use SRI(s) here to remove any need to know view hierarchy relationships... we simply want a reference
			 to the UI instance when ready. 																	              
		-->

	<SmartResourceInjector bundleName="registration" target="{AlreadyRegisteredForm}">
		<ResourceProxy property="alertTitle" 					key="signing.invalid" />
		<ResourceProxy property="validator.requiredFieldError" 	key="signin.validationError.email" />
		<ResourceProxy property="lblTitle.text" 				key="signin.title" />
		<ResourceProxy property="lblEmail.text" 				key="signin.email" />
	</SmartResourceInjector>
		
	<SmartResourceInjector bundleName="registration" target="{RegistrationForm}">
		<ResourceProxy property="registrationValidators[0].requiredFieldError" 	key="register.validationError.firstName" />
		<ResourceProxy property="registrationValidators[1].requiredFieldError" 	key="register.validationError.lastName" />
		<ResourceProxy property="registrationValidators[2].requiredFieldError" 	key="register.validationError.email" />
		<ResourceProxy property="registrationValidators[3].requiredFieldError" 	key="register.validationError.company" />
		<ResourceProxy property="registrationValidators[4].requiredFieldError" 	key="register.validationError.postal" />
		<ResourceProxy property="registrationValidators[5].requiredFieldError" 	key="register.validationError.phone" />
		<ResourceProxy property="registrationValidators[6].lowerThanMinError" 	key="register.validationError.country" />
		<ResourceProxy property="registrationValidators[7].lowerThanMinError" 	key="register.validationError.state" />
		
		<ResourceProxy property="alertTitle" 									key="register.invalidProfile" />
		
		<ResourceProxy property="lblTitle.text" 								key="register.title" />
		<ResourceProxy property="lblSubTitle.text" 								key="register.subtitle" />
		<ResourceProxy property="lblMsg.text" 									key="register.allRequired" />
		
		<ResourceProxy property="lblFirstName.text" 							key="register.firstName" />
		
		<ResourceProxy property="lblLastName.text" 								key="register.lastName" />
		<ResourceProxy property="lblEmail.text" 								key="register.email" />
		<ResourceProxy property="lblPhone.text" 								key="register.phone" />
		<ResourceProxy property="lblCompany.text" 								key="register.company" />
		<ResourceProxy property="lblZip.text" 									key="register.postal" />
		<ResourceProxy property="lblState.text" 								key="register.state" />
		<ResourceProxy property="cmbState.prompt" 								key="register.prompt.state" />
		<ResourceProxy property="lblCountry.text" 								key="register.country" />
		<ResourceProxy property="cmbCountry.prompt" 							key="register.prompt.country" />
		
		<!-- 
			Sample of E=elegant support for view state changes to fire localized resource injections: see "state" attribute
			When state is != "", then the injection only occurs for state == <ui instance>.currentState.
			We could specify the announcer/trigger for the state changes, but if not specified we use 
			the cached instance of the UI [RegistrationForm] class. 
		-->

		<ResourceProxy property="lblThanks.htmlText" 		state="showConfirmEmail" 	key="request.thanks.title" 		parameters="{[account.fullName]}"  />
		<ResourceProxy property="lblThanksMessage.htmlText"	state="showConfirmEmail"	key="request.thanks.message" 	parameters="{[account.email]}"	/>
		
	</SmartResourceInjector>
	
	
		<!-- 
			 SRIs used here when we expect multiple instances of class. We can inject specifically based on instance ID or
		     we can also override the target Class desired on a ResourceProxy basis. 
		     Here we are injecting localized PNGs into the <Image instance>.source properties
		-->
	
	<SmartResourceInjector bundleName="registration" target="{Image}"	>
		<ResourceProxy 								targetID="btnRegister"  property="source" 		key="button.skin.register" 	type="class" />
		<ResourceProxy target="{SignInButton}"		targetID="btnSignIn" 	property="source" 		key="button.skin.signin" 	type="class" />
		<PropertyProxy 								targetID="btnFlagUSA" 	property="toolTip" 		source="{account}" 			sourceKey="email" />
	</SmartResourceInjector>


</LocaleMap>
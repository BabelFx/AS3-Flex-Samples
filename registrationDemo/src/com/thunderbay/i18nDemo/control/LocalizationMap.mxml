<?xml version="1.0" encoding="utf-8"?>
<map:LocaleMap 	xmlns="com.asfusion.mate.l10n.injectors.*"
				xmlns:map="com.asfusion.mate.l10n.maps.*" 
				xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:injectors="http://com.asfusion.mate.l10n/" xmlns:mate="http://mate.asfusion.com/">
	
	<!-- Support for Locale ResourceBundle changes -->
	<mx:Script>
		<![CDATA[
			import com.thunderbay.i18nDemo.views.SignInPage;
			import com.thunderbay.i18nDemo.views.forms.RegistrationForm;
			import com.thunderbay.i18nDemo.vo.AccountVO;
			
			import mx.controls.Image;
			
			private function clearValidationErrors():void {
				if (signInPage != null) {
					// Tooltip error messages are updated upon validation
					// until validation recycles...
					signInPage.clearErrors();	
				}
			}
			
			[Bindable] public var signInPage	: SignInPage 	= null;
			[Bindable] public var account 		: AccountVO 	= null;	
		]]>
	</mx:Script>
	
	<!-- ****************************************************************************************************** 
	This solution (line 36...) leverages compile-time type checking but suffers from:
	2) Only supports a single unique instance of the target class
	But it does support property chain references (e.g. signInPage.frmSignin.validator)
	
	****************************************************************************************************** -->
	
	<ResourceInjector bundleName="registration" localeChange="clearValidationErrors()">
		<ResourceProxy target="{signInPage.frmSignin}" 									property="alertTitle" 			key="signing.invalid" />
		<ResourceProxy target="{signInPage.frmSignin.validator}" 						property="requiredFieldError" 	key="signin.validationError.email" />
		<ResourceProxy target="{signInPage.frmSignin.lblTitle}"   						property="text" 				key="signin.title" />
		<ResourceProxy target="{signInPage.frmSignin.lblEmail}"   						property="text" 				key="signin.email" />
		
		<ResourceProxy target="{signInPage.frmRegister}" 								property="alertTitle" 			key="register.invalidProfile" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[0]}" 		property="requiredFieldError" 	key="register.validationError.firstName" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[1]}" 		property="requiredFieldError" 	key="register.validationError.lastName" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[2]}" 		property="requiredFieldError" 	key="register.validationError.email" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[3]}" 		property="requiredFieldError" 	key="register.validationError.company" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[4]}" 		property="requiredFieldError" 	key="register.validationError.postal" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[5]}" 		property="requiredFieldError" 	key="register.validationError.phone" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[6]}" 		property="lowerThanMinError" 	key="register.validationError.country" />
		<ResourceProxy target="{signInPage.frmRegister.registrationValidators[7]}" 		property="lowerThanMinError" 	key="register.validationError.state" />
		
		<ResourceProxy target="{signInPage.frmRegister.lblTitle}"     					property="text" 				key="register.title" />
		<ResourceProxy target="{signInPage.frmRegister.lblSubTitle}"   					property="text" 				key="register.subtitle" />
		<ResourceProxy target="{signInPage.frmRegister.lblMsg}"   						property="text" 				key="register.allRequired" />
		
		<ResourceProxy target="{signInPage.frmRegister.lblFirstName}"   				property="text" 				key="register.firstName" />
		<ResourceProxy target="{signInPage.frmRegister.lblLastName}"   					property="text" 				key="register.lastName" />
		<ResourceProxy target="{signInPage.frmRegister.lblEmail}"   					property="text" 				key="register.email" />
		<ResourceProxy target="{signInPage.frmRegister.lblPhone}"   					property="text" 				key="register.phone" />
		<ResourceProxy target="{signInPage.frmRegister.lblCompany}"   					property="text" 				key="register.company" />
		<ResourceProxy target="{signInPage.frmRegister.lblZip}"   						property="text" 				key="register.postal" />
		<ResourceProxy target="{signInPage.frmRegister.lblState}"   					property="text" 				key="register.state" />
		<ResourceProxy target="{signInPage.frmRegister.cmbState}"   					property="prompt" 				key="register.prompt.state" />
		<ResourceProxy target="{signInPage.frmRegister.lblCountry}"   					property="text" 				key="register.country" />
		<ResourceProxy target="{signInPage.frmRegister.cmbCountry}"   					property="prompt" 				key="register.prompt.country" />
		
		
		<ResourceProxy target="{signInPage.frmRegister.lblThanks}" 						
					   property="htmlText" 			
					   key="request.thanks.title" 		 
					   parameters="{[account.fullName]}" 
					   state="showConfirmEmail" 
					   trigger="{signInPage.frmRegister}" />
		<ResourceProxy target="{signInPage.frmRegister.lblThanksMessage}" 				
					   property="htmlText"				
					   key="request.thanks.message"  
					   parameters="{[account.email]}"
					   state="showConfirmEmail" 
					   trigger="{signInPage.frmRegister}"/>
		
	</ResourceInjector>
	
	
	<!-- ****************************************************************************************************** -->
	<!-- SmartInjectors for targeted class instantiations; where the class will have multiple instances created -->
	<!--       Here we are injecting BitmapAssets (pngs) into the <Image instance>.source properties            -->
	<!-- ****************************************************************************************************** -->
	
	<SmartResourceInjector bundleName="registration" target="{Image}"	>
		<ResourceProxy targetID="btnRegister"  	property="source" 		key="button.skin.register" 	type="class" />
		<ResourceProxy targetID="btnSignIn" 	property="source" 		key="button.skin.signin" 	type="class" />
	</SmartResourceInjector>

<!-- Test of property chain syntax within targetKey...
	<injectors:SmartResourceInjector target="{RegistrationForm}">
		<injectors:PropertyInjector targetKey="lblEmailHint.text" source="{account}" sourceKey="email" />
	</injectors:SmartResourceInjector>
-->	
</map:LocaleMap>